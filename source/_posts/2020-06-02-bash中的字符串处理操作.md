---
title: bash中的字符串处理操作
date: 2020-06-02 14:35:42
tags:
- Linux
- bash
categories:
- code snippet
---

本文记录了作者使用bash过程中，为了解决去除前缀后缀的问题而了解到的bash的字符串操作，简单来说

1. `string:position`或者`string:position:length`进行子串提取
2. `string#pattern`进行最短匹配前缀去除，`string##pattern`进行最长匹配前缀去除
3. `string%pattern`进行最短匹配后缀去除，`string%%pattern`进行最长匹配后缀去除
4. `string/pattern/string`进行首个`pattern`替换，`string//pattern/string`进行全部`pattern`替换
5. 以上的`pattern`指的都是*wildcard*而不是*regular expression*

<!-- more -->

## 场景

有时在使用bash脚本的时候，希望对字符串做一些基本的操作，比如说去除前缀后缀（去除文件扩展名，统一前缀编号等），事实上，bash原生支持了许多字符串操作

## bash 中的字符串操作

**下面所有的`pattern`指的都是bash wildcard而不是regular expression**

### 子串提取

使用`string:position`提取从`position`开始的子串

```bash
> string="text, dummy, text, dummy"
> echo ${string:3}
t, dummy, text, dummy
```

使用`string:position:length`提取从`position`开始，长度为`length`的子串

```bash
> string="text, dummy, text, dummy"
> echo ${string:3:4}
t, d
```

### 前缀去除

使用`string#pattern`进行最短匹配前缀去除

```bash
> string="text, dummy, text, dummy"
> echo ${string#*text}
, dummy, text, dummy
```

使用`string##pattern`进行最长匹配前缀去除

```bash
> string="text, dummy, text, dummy"
> echo ${string##*text}
, dummy
```

### 后缀去除

使用`string%pattern`进行最短匹配后缀去除

```bash
> string="text, dummy, text, dummy"
> echo ${string%dummy*}
text, dummy, text, y
```

使用`string%%pattern`进行最长匹配后缀去除

```bash
> string="text, dummy, text, dummy"
> echo ${string%%dummy*}
text, 
```

### 字符串替换

使用`string/pattern/string`进行首个`pattern`的替换

```bash
> string="text, dummy, text, dummy"
> echo ${string/text/TEXT}
TEXT, dummy, text, dummy
```

使用`string//pattern/string`进行全部`pattern`的替换

```bash
> string="text, dummy, text, dummy"
> echo ${string//text/TEXT}
TEXT, dummy, TEXT, dummy
```

想要得到对正则表达式匹配替换的支持的话，可以使用[sed](https://man.linuxde.net/sed)命令
